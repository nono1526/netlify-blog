<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue 原始碼：整理 Prototype &amp; Global | Nono</title>
    <meta name="description" content="前端工程師的紀錄">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    <link rel="preload" href="/assets/css/0.styles.fca4b0ec.css" as="style"><link rel="preload" href="/assets/js/app.128bf942.js" as="script"><link rel="preload" href="/assets/js/5.75ff3871.js" as="script"><link rel="preload" href="/assets/js/10.2993bc30.js" as="script"><link rel="prefetch" href="/assets/js/11.66069ea3.js"><link rel="prefetch" href="/assets/js/12.46a7547a.js"><link rel="prefetch" href="/assets/js/2.249b1cca.js"><link rel="prefetch" href="/assets/js/3.16dd5756.js"><link rel="prefetch" href="/assets/js/4.528b5605.js"><link rel="prefetch" href="/assets/js/6.5ab4f3a4.js"><link rel="prefetch" href="/assets/js/7.d844d02d.js"><link rel="prefetch" href="/assets/js/8.eb2aa797.js"><link rel="prefetch" href="/assets/js/9.1b80ac47.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fca4b0ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-app="true" id="inspire" class="v-application v-application--is-ltr theme--light"><div class="v-application--wrap"><header class="v-sheet v-sheet--tile theme--dark v-toolbar v-toolbar--dense v-toolbar--flat v-app-bar v-app-bar--fixed indigo" style="height:48px;margin-top:0px;transform:translateY(0px);left:0px;right:0px;"><div class="v-toolbar__content" style="height:48px;"><div class="v-toolbar__title"><a href="/" class="white--text router-link-active">Nono</a></div> <div class="flex-grow-1"></div> <a href="/" class="v-btn v-btn--flat v-btn--router v-btn--text theme--dark v-size--default amber--text text--lighten-2"><span class="v-btn__content">
    文章列表
  </span></a><a href="/tag/" class="v-btn v-btn--flat v-btn--router v-btn--text theme--dark v-size--default amber--text text--lighten-2"><span class="v-btn__content">
    Tags
  </span></a></div></header> <main class="v-content" style="padding-top:48px;padding-right:0px;padding-bottom:0px;padding-left:0px;"><div class="v-content__wrap"><div class="container vuetify__content"><div class="py-3 px-md-10 px-3 my-3 v-card v-sheet theme--light"><div class="content__header"><h1 id="vue-原始碼：整理-prototype-global"><a href="#vue-原始碼：整理-prototype-global" aria-hidden="true" class="header-anchor">#</a> Vue 原始碼：整理 Prototype &amp; Global</h1></div> <div class="article-mate"><span>2019年10月29日 星期二</span> <i aria-hidden="true" class="v-icon notranslate mdi mdi-folder theme--light" style="font-size:16px;"></i> <span class="text-right">
        vue
      </span></div> <div class="content__default"><p>整理 Vue runtime，Vue 原形鍊上的方法以及 Global 方法。版本是 2.6.10。</p> <p>以下是有對 Vue prototype &amp; Global 有做更動的檔案</p> <ol><li>web/entry-runtime.js</li> <li>web/runtime/index.js</li> <li>core/index.js</li> <li>core/instance/index</li></ol> <h2 id="從-core-instance-index-出發，一步一步的來看加了什麼"><a href="#從-core-instance-index-出發，一步一步的來看加了什麼" aria-hidden="true" class="header-anchor">#</a> 從 core/instance/index 出發，一步一步的來看加了什麼</h2> <p><img src="https://i.imgur.com/K27poSX.png" alt=""></p> <h3 id="initmixin"><a href="#initmixin" aria-hidden="true" class="header-anchor">#</a> initMixin</h3> <ul><li><code>Vue.prototype._init</code>
Vue Constructor 第一個呼叫的 method，主要做 Options 各種格式化。</li></ul> <p><img src="https://i.imgur.com/moQhysk.png" alt=""></p> <h3 id="statemixin"><a href="#statemixin" aria-hidden="true" class="header-anchor">#</a> stateMixin</h3> <ul><li>Vue.prototype.$data</li> <li>Vue.prototype.$props</li> <li>Vue.prototype.$set</li> <li>Vue.prototype.$delete</li> <li>Vue.prototype.$watch</li></ul> <h3 id="eventsmixin"><a href="#eventsmixin" aria-hidden="true" class="header-anchor">#</a> eventsMixin</h3> <ul><li>Vue.prototype.$on</li> <li>Vue.prototype.$once</li> <li>Vue.prototype.$off</li> <li>Vue.prototype.$emit</li></ul> <h3 id="lifecyclemixin"><a href="#lifecyclemixin" aria-hidden="true" class="header-anchor">#</a> lifecycleMixin</h3> <ul><li>Vue.prototype._update</li> <li>Vue.prototype.$forceUpdate</li> <li>Vue.prototype.$destroy</li></ul> <h3 id="rendermixin"><a href="#rendermixin" aria-hidden="true" class="header-anchor">#</a> renderMixin</h3> <ul><li>Vue.prototype.$nextTick</li> <li>Vue.prototype._render</li> <li>Vue.prototype.一堆renderHelper
<img src="https://i.imgur.com/6RRGdmm.png" alt=""></li></ul> <h3 id="initglobalapi"><a href="#initglobalapi" aria-hidden="true" class="header-anchor">#</a> initGlobalAPI</h3> <ul><li>Vue.config</li> <li>Vue.util
<ul><li>Vue.util.warn</li> <li>Vue.util.extend</li> <li>Vue.util.mergeOptions</li> <li>Vue.util.defineReactive</li></ul></li> <li>Vue.set</li> <li>Vue.delete</li> <li>Vue.nextTick</li> <li>Vue.observable (2.6)</li> <li>Vue.options
<ul><li>Vue.options._base (指向 Vue 建構函數)</li> <li>Vue.options.components
<ul><li>Vue.options.components.KeepAlives</li></ul></li> <li>Vue.options.directives</li> <li>Vue.options.filters</li></ul></li> <li>Vue.use</li> <li>Vue.mixin</li> <li>Vue.extend</li> <li>Vue.component</li> <li>Vue.directive</li> <li>Vue.filter</li></ul> <h3 id="core-index"><a href="#core-index" aria-hidden="true" class="header-anchor">#</a> core/index</h3> <ul><li>Vue.prototype.$isServer</li> <li>Vue.prototype.$ssrContext</li> <li>Vue.FunctionalRenderContext</li></ul> <h3 id="runtime-index"><a href="#runtime-index" aria-hidden="true" class="header-anchor">#</a> runtime/index</h3> <ul><li>Vue.config.mustUseProp</li> <li>Vue.config.isReservedTag</li> <li>Vue.config.isReservedAttr</li> <li>Vue.config.getTagNamespace</li> <li>Vue.config.isUnknownElement</li> <li>Vue.options.directives (./directives/index)
<ul><li>Vue.options.directives.model</li> <li>Vue.options.directives.show</li></ul></li> <li>Vue.options.components (./components/index)
<ul><li>Vue.options.components.Transition</li> <li>Vue.options.components.TransitionGroup</li></ul></li> <li>Vue.prototype.<strong>patch</strong></li> <li>Vue.prototype.$mount</li></ul> <h2 id="其他"><a href="#其他" aria-hidden="true" class="header-anchor">#</a> 其他</h2> <h3 id="build"><a href="#build" aria-hidden="true" class="header-anchor">#</a> build</h3> <p>Vue 使用 rollup 來做打包工具，因為要打包出來相依不同的環境，所以有很多不同的 entry。
有興趣可以參考 <a href="https://vuejs.org/v2/guide/installation.html#Explanation-of-Different-Builds" target="_blank" rel="noopener noreferrer">官網說明<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <img src="https://i.imgur.com/hWuQHUx.png" alt=""><br>
此外，還有為了支援 server side render、weex(mobile)，也做了不同的處理。
設計成這樣一層又一層加上去的設計，增加了 Vue prototype 的彈性，能在相容上做更多變化。</p></div></div> <div class="py-3 px-md-10 px-3 my-3 v-card v-sheet theme--light"></div></div></div></main></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.128bf942.js" defer></script><script src="/assets/js/5.75ff3871.js" defer></script><script src="/assets/js/10.2993bc30.js" defer></script>
  </body>
</html>
